<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Заказ оформлен — x86 Trade</title>
  <link rel="shortcut icon" href="images/favicon.svg" type="image/x-icon" />
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
      <header class="header">
      <div class="container">
        <div class="header_inner">
          <a href="index.html" class="logo">
            <img src="images/logo.svg" alt="" />
            <div class="name_logo">x86 Trade</div>
          </a>
          <nav class="menu">
            <button class="menu_btn">
              <span> </span>
              <span> </span>
              <span> </span>
            </button>
            <ul class="menu_list">
              <li class="menu_item">
                <a href="index.html" class="menu_link">Главная</a>
              </li>
              <li class="menu_item">
                <a href="delivery.html" class="menu_link">Доставка</a>
              </li>
              <li class="menu_item">
                <a href="about.html" class="menu_link">О нас</a>
              </li>
              <li class="menu_item">
                <a href="vacancy.html" class="menu_link">Вакансии</a>
              </li>
              <li class="menu_item">
                <a href="contact.html" class="menu_link">Контакты</a>
              </li>
            </ul>
          </nav>
          <ul class="user-actions">
            <li class="user-actions_item">
              <a href="cart.html" class="user-actions_link cart-container">
                <img src="images/cart.svg" alt="Корзина" class="cart-icon" />
                <span class="tooltip">Корзина</span>
              </a>
            </li>

            <li class="user-actions_item">
              <div class="user-actions_link profile-container" style="position:relative;">
                <!-- Контент будет отрисован JS (иконка / dropdown или вызов модалки) -->
              </div>
            </li>

            <li class="user-actions_item user-actions_item-search">
              <a href="#" class="user-actions_link search-container">
                <img src="images/search.svg" alt="Поиск" class="search-icon" />
                <span class="tooltip">Поиск</span>
              </a>
            </li>
          </ul>
          <!-- Блок с текущим временем -->
          <div class="time-display" id="current-time"></div>
        </div>
      </div>
    </header>
  <main class="main">
    <section class="order_success">
      <div class="container">
        <h2>Спасибо — ваш заказ принят</h2>
        <div id="orderInfo">
          <p>Номер заказа: <strong id="orderId">—</strong></p>
          <p id="orderDetails">Загружаем информацию...</p>
        </div>
        <a href="index.html" class="btn">Вернуться на главную</a>
        <a href="profile.html" class="btn">Мои заказы</a>
      </div>
    </section>
  </main>
  <footer class="footer_distributed">
      <div class="footer_left">
        <div class="logo_footer">
          <a href="index.html" class="logo">
            <img src="images/logo.svg" alt="" />
            <div class="name_logo">x86 Trade</div>
          </a>
        </div>
        <p class="footer_links">
          <a href="index.html" class="link_1">Главная</a>
          <a href="delivery.html">Доставка</a>
          <a href="vacancy.html">Вакансии</a>
          <a href="about.html">О нас</a>
          <a href="contact.html">Контакты</a>
        </p>
        <p class="footer_company_name">x86 Trade © 2025</p>
      </div>
      <div class="footer_center">
        <div>
          <img src="images/location.svg" alt="Адрес" class="footer_icon" />
          <p><span>ул. Попова 42</span> Белгород, Россия</p>
        </div>
        <div>
          <img src="images/phone.svg" alt="Телефон" class="footer_icon" />
          <p>+7 999 999 999</p>
        </div>
        <div>
          <img src="images/email.svg" alt="Почта" class="footer_icon" />
          <p><a href="mailto:x86trade@gmail.com">x86trade@gmail.com</a></p>
        </div>
      </div>
      <div class="footer_right">
        <p class="footer_company_about">
          <span>О компании</span>
          Наша компания имеет многолетний опыт сборки и тестирования
          конфигурация, обращайтесь!.
        </p>
        <div class="footer_icons">
          <a href="#" class="social_icon_link">
            <img
              src="images/social_network/vk.svg"
              alt="Мы ВКонтакте"
              class="social_icon_img"
            />
          </a>
          <a href="#" class="social_icon_link">
            <img
              src="images/social_network/telegram.svg"
              alt="Наш Telegram"
              class="social_icon_img"
            />
          </a>
          <a href="#" class="social_icon_link">
            <img
              src="images/social_network/facebook.svg"
              alt="Наш Email"
              class="social_icon_img"
            />
          </a>
          <a href="#" class="social_icon_link">
            <img
              src="images/social_network/instagram.svg"
              alt="Наш Instagram"
              class="social_icon_img"
            />
          </a>
        </div>
      </div>
    </footer>
  
  <script src="js/common.js"></script>
  <script src="js/api.js"></script>
  <script>
    // возьмём order_id из querystring и подгрузим детали через API (опционально)
    function getQueryParam(name) {
      return new URLSearchParams(window.location.search).get(name);
    }
    (async function () {
      const oid = getQueryParam("order_id");
      document.getElementById("orderId").textContent = oid || "—";
      if (!oid) {
        document.getElementById("orderDetails").textContent = "ID заказа не передан.";
        return;
      }
      try {
        // Попытаемся получить детали заказа: GET /api/orders?id=OID
        if (window.api && typeof window.api.apiGet === "function") {
          const resp = await window.api.apiGet("/api/orders", { id: oid });
          // resp may be { order: ..., items: [...] } or depending on your handler
          if (resp.order) {
            const o = resp.order;
            document.getElementById("orderDetails").innerHTML =
              `Статус: <strong>${o.status}</strong><br>Сумма: <strong>${o.total_amount} ₽</strong><br>Создан: ${o.created_at || ''}`;
          } else if (Array.isArray(resp)) {
            // если GetOrdersHandler возвращает массив
            const o = resp.find(x => String(x.id) === String(oid)) || resp[0];
            if (o) {
              document.getElementById("orderDetails").innerHTML =
                `Статус: <strong>${o.status}</strong><br>Сумма: <strong>${o.total_amount} ₽</strong><br>Создан: ${o.created_at || ''}`;
            } else {
              document.getElementById("orderDetails").textContent = "Детали заказа не найдены.";
            }
          } else {
            document.getElementById("orderDetails").textContent = "Детали заказа недоступны.";
          }
        } else {
          document.getElementById("orderDetails").textContent = "API недоступно.";
        }
      } catch (err) {
        console.error(err);
        document.getElementById("orderDetails").textContent = "Ошибка при получении деталей заказа.";
      }
    })();
  </script>
</body>
</html>
